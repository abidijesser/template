import{r as o,x as g,u as w,j as e,C as y,a as b,b as N,c as R,d as S,e as E,A as m,f as h,i as P,B as q}from"./index-CQXiZoZy.js";import{C as B}from"./CCardGroup-Cc5vEPUM.js";const L=()=>{const[t,x]=o.useState(""),[n,C]=o.useState(""),[i,r]=o.useState(""),[l,c]=o.useState(""),{token:j}=g(),v=w(),f=async a=>{var d,u,p;if(a.preventDefault(),t!==n){r("Les mots de passe ne correspondent pas");return}if(t.length<6){r("Le mot de passe doit contenir au moins 6 caractères");return}try{console.log("Envoi de la requête de réinitialisation...");const s=await q.post("http://localhost:3001/api/auth/reset-password",{token:j,newPassword:t});console.log("Réponse reçue:",s.data),s.data.success?(c("Mot de passe réinitialisé avec succès. Redirection vers la page de connexion..."),r(""),setTimeout(()=>{v("/login")},3e3)):r(s.data.error||"Erreur lors de la réinitialisation du mot de passe")}catch(s){console.error("Erreur détaillée:",(d=s.response)==null?void 0:d.data),r(((p=(u=s.response)==null?void 0:u.data)==null?void 0:p.error)||"Une erreur est survenue lors de la réinitialisation"),c("")}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(y,{children:e.jsx(b,{className:"justify-content-center",children:e.jsx(N,{md:6,children:e.jsx(B,{children:e.jsx(R,{className:"p-4",children:e.jsx(S,{children:e.jsxs(E,{onSubmit:f,children:[e.jsx("h1",{children:"Réinitialiser le mot de passe"}),i&&e.jsx(m,{color:"danger",children:i}),l&&e.jsx(m,{color:"success",children:l}),e.jsx("div",{className:"mb-3",children:e.jsx(h,{type:"password",placeholder:"Nouveau mot de passe",value:t,onChange:a=>x(a.target.value),required:!0})}),e.jsx("div",{className:"mb-3",children:e.jsx(h,{type:"password",placeholder:"Confirmer le mot de passe",value:n,onChange:a=>C(a.target.value),required:!0})}),e.jsx(P,{color:"primary",type:"submit",children:"Réinitialiser le mot de passe"})]})})})})})})})})};export{L as default};
