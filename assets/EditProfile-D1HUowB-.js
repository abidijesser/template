import{r as n,x as y,u as N,j as e,a as k,b as E,c as S,z as w,d as P,e as A,f as o,i as p,s as j}from"./index-CQXiZoZy.js";const U=()=>{const[l,t]=n.useState({name:"",email:"",skills:[]}),[r,m]=n.useState(""),[d,h]=n.useState(""),{id:i}=y(),f=N();n.useEffect(()=>{(async()=>{try{const a=await j.get(`/api/auth/profile/${i}`);t(a.data)}catch(a){h("Error fetching user data"),console.error(a)}})()},[i]);const u=s=>{const{name:a,value:c}=s.target;t(v=>({...v,[a]:c}))},x=()=>{r.trim()!==""&&!l.skills.includes(r.trim())&&(t(s=>({...s,skills:[...s.skills,r.trim()]})),m(""))},b=s=>{t(a=>({...a,skills:a.skills.filter(c=>c!==s)}))},C=s=>{s.key==="Enter"&&(s.preventDefault(),x())},g=async s=>{s.preventDefault();try{await j.put(`/api/auth/profile/${i}`,l),f("/profile")}catch(a){h("Error updating profile"),console.error(a)}};return e.jsx(k,{children:e.jsx(E,{md:8,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(w,{children:e.jsx("h4",{children:"Edit Profile"})}),e.jsxs(P,{children:[d&&e.jsx("div",{className:"alert alert-danger",children:d}),e.jsxs(A,{onSubmit:g,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx(o,{type:"text",name:"name",value:l.name||"",onChange:u})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx(o,{type:"email",name:"email",value:l.email||"",onChange:u})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Compétences"}),e.jsxs("div",{className:"d-flex mb-2",children:[e.jsx(o,{type:"text",placeholder:"Ajouter une compétence",value:r,onChange:s=>m(s.target.value),onKeyPress:C,className:"me-2"}),e.jsx(p,{type:"button",color:"success",onClick:x,children:"Ajouter"})]}),l.skills&&l.skills.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:l.skills.map((s,a)=>e.jsxs("div",{className:"bg-light rounded-pill px-3 py-1 d-flex align-items-center",children:[e.jsx("span",{children:s}),e.jsx("button",{type:"button",className:"btn-close ms-2",style:{fontSize:"0.7rem"},onClick:()=>b(s),"aria-label":"Remove"})]},a))}):e.jsx("div",{className:"text-muted",children:"Aucune compétence ajoutée"})]}),e.jsx(p,{type:"submit",color:"primary",children:"Save Changes"})]})]})]})})})};export{U as default};
